\documentclass{beamer}
\usepackage[applemac]{inputenc}
\usepackage[spanish,activeacute]{babel}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{latexsym}
\usepackage{listings}
\lstset{language=haskell, frame=single, tabsize=2}

%\newcommand{\speech}[1]{{\small #1}}
\newcommand{\hpage}{$\lambda Page$}
\newcommand{\haskell}{\textsl{Haskell}}
\newcommand{\smalltalk}{\textsl{Smalltalk}}
\newcommand{\speech}[1]{}
\newcommand{\G}{\mathcal{G}}
\usetheme{DC}


\title{\hpage}
\author{\textsl{Fernando~Benavides}}
	
\institute{Departamento de Computación, FCEyN,Universidad de Buenos Aires.}

\date{\today}

%\beamerdefaultoverlayspecification{<+->}

%%TODO: Quitar Hayoo!
%%TODO: Recordar ctrl+1 -> alt-tab
%%TODO: Agregar títulos divisores
%%TODO: Incapié en laziness

\begin{document}

\begin{frame}
	\titlepage
\end{frame}

\section{Introducción}
\subsection{Presentación}
\begin{frame}
     \emph{El Orador}\\
     \begin{itemize}
       \item Fernando Benavides
	 \end{itemize}
	\pause
     \emph{El camino recorrido}\\
     \begin{itemize}
       \item Alumno de Computación desde 2001
       \item Programador desde hace más de 10 años
       \item Programador \textsl{Funcional} desde hace 2 años
	\end{itemize}
	\pause
     \emph{La idea}\\
     \begin{itemize}
       \item Desarrollar una herramienta para los programadores funcionales como las que existen en el paradigma de orientación a objetos
	\end{itemize}
\end{frame}

\subsection{Motivación}
\begin{frame}[fragile]
	\frametitle{Trabajando en \haskell}
	%%TODO: Les presentamos al programador funcional...
	%%				así desarrolla un proyecto típico (un item para cada herramienta que usa)
\end{frame}
\begin{frame}[fragile]
	\frametitle{Trabajando con Lenguajes Orientados a Objetos}
	%%TODO: Acá está el programador objetoso...
	%%				El tipo tiene muchas herramientas cool que le hacen la vida más fácil
	%%				(un item para cada herramienta)
\end{frame}
\begin{frame}[fragile]
	\frametitle{Workspace}
	%%TODO: En particular vamos a prestar especial atención a una de estas herramientas
	%%				El Workspace de \smalltalk
	%%				pictures/workspace
\end{frame}


\section{Descubriendo \hpage}
\subsection{Como el Workspace  de Smalltalk \ldots}
\begin{frame}[fragile]
	%%TODO: \hpage es como el Workspace de \smalltalk, miren
	%%			 Demo...
	%%TODO: Evaluación de expresiones
	%%			  Captura de excepciones
	%%			  Definiciones
\end{frame}
\subsection{\ldots pero para Haskell}
\begin{frame}[fragile]
	\frametitle{Lazy Evaluation}
	%%TODO: Explicar cómo funciona \haskell y qué es la evaluación perezosa
	%%				Notar cómo decidimos aprovechar eso en nuestro programa
	%%				RECORDAR: Mostrar cómo la lista puede estar parcialmente indefinida, pero igual ser una lista
\end{frame}
\begin{frame}[fragile]
	\frametitle{Efectos Colaterales}
	%%TODO: Explicar cómo funciona \haskell en cuanto a la mónada IO (represetan ORDENES)
	%%				Notar cómo decidimos aprovechar eso en nuestro programa
	%%				RECORDAR: Mostrar cómo la lista puede estar parcialmente indefinida, pero igual ser una lista
\end{frame}
\begin{frame}
\frametitle{Manejo de Módulos}
	%%TODO: Revisar si queda bien esta diap.
	Utilizando \hpage, el usuario puede
	\begin{itemize}
		\item Importar módulos
		\item Cargar módulos
		\item Recargar módulos
	\end{itemize}
	Todo esto \textsl{sin perder las expresiones que ya tiene definidas}
\end{frame}

\section{\hpage\ por Dentro}
\begin{frame}
	\begin{center}
		{\Huge \emph{\hpage\ por Dentro}}
	\end{center}
\end{frame}
\subsection{Diseño}
\begin{frame}
	\hpage\ está desarrollado en \haskell
	\pause \\~\\
	Se conecta con \textsl{GHC} a través de su API
	\pause \\~\\
	La interfaz gráfica está desarrollada usando \textsl{wxHaskell}
\end{frame}
\begin{frame}
\frametitle{Paralelismo}
	Muchas cosas suceden simultáneamente en \hpage\:
	\begin{itemize}
		\item Manejo de Páginas (crear, abrir, modificar, guardar, cerrar, etc.)
		\item Interpretación de Expresiones
		\item Evaluación de Acciones de Entrada/Salida
	\end{itemize}
	\pause
	Para lograrlo, creamos \textsl{eprocess}:
	\begin{itemize}
		\item Basada conceptualmente en \textsl{Erlang}
		\item Construída utilizando \textsl{Threads}, \textsl{Channels} y \textsl{MVars}
	\end{itemize}
\end{frame}

\subsection{Arquitectura}
%%TODO: En dibujos, HintServer -> GHCServer
%%								Vuela GHC
%%								Diapositiva de ValueFiller está esperando a IO Server
%%			 En texto, mostrar quiénes están ``trabajando'', ``esperando'', etc...
\begin{frame}
\frametitle{Arquitectura}
\begin{columns}[c]
	\column{.5\textwidth}Principales Requerimientos:
	\begin{itemize}
		\item Conexión con GHC
		\item Paralelismo
		\item Errores Controlados
		\item Presentación de Resultados
	\end{itemize}
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
	Veremos cómo interactúan estos componentes para evaluar la siguiente expresión:
	\begin{lstlisting}
		readFile "hpage.cabal" >>=
		    return . length . head . lines
	\end{lstlisting}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}El usuario indica al \texttt{UI~Manager} que desea interpretar la expresión
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/01}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}El \texttt{UI~Manager} solicita la evaluación del texto al \texttt{HPage~Server}
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/02}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}El \texttt{HPage~Server} envía al \texttt{Hint~Server} la expresión para conocer su valor y su tipo
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/03}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}El \texttt{Hint~Server} se comunica con GHC utilizando \textsl{hint} y obtiene los valores solicitados, que luego informa al \texttt{HPage~Server}
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/04}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}
		El \texttt{HPage~Server}, al detectar que se trata de una acción de la mónada \texttt{IO}, crea una \texttt{MVar} y envía un mensaje al \texttt{IO~Server} para que ejecute la acción y llene la \texttt{MVar} con su resultado. Luego informa al \texttt{UI~Manager} el tipo de la expresión y la \texttt{MVar} en la que se volcará su resultado una vez ejecutada
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/05}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}El \texttt{UI~Manager} muestra el tipo al usuario y vacía el cuadro de texto donde se encuentra el resultado.  Luego, informándole la \texttt{MVar} recibida, solicita al \texttt{Value~Filler} que espere el resultado y llene el cuadro de texto con él.
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/06}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}El \texttt{Value~Filler} se bloquea a la espera de que un valor sea depositado en la \texttt{MVar} recibida.  Una vez conseguido ese valor, que es una cadena de caracteres (\texttt{''11''}), toma el primero y lo envía al \texttt{Element~Filler} al tiempo que inicia el \texttt{Runaway~Killer}.  Luego, se bloquea esperando recibir un mensaje de alguno de ellos.
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/07}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}Antes de transcurrido un segundo, el \texttt{Element~Filler} computa el caracter \texttt{1} y envía un mensaje al \texttt{Value~Filler} con el mismo.  El \texttt{Value~Filler} lo agrega al cuadro de texto del resultado y detiene el \texttt{Runaway~Killer}.  Luego repite el paso anterior y éste para el segundo caracter.
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/07}
\end{columns}
\end{frame}
\begin{frame}[fragile]
\frametitle{Ejemplo de Interacción}
\begin{columns}[c]
	\column{.5\textwidth}Finalmente, el \texttt{Value~Filler} informa al \texttt{UI~Manager} que ha presentado el resultado con éxito, para que éste se lo informe al usuario.
	\column{.5\textwidth}
		\includegraphics[height=.75\textheight]{pictures/architecture/06}
\end{columns}
\end{frame}

\section{Próximos Pasos}
\subsection{Limitaciones}
\begin{frame}
%%TODO: Extender el texto
\frametitle{Limitaciones}
	?`Qué falta?
	\begin{itemize}
		\item Nuevas visualizaciones %%TODO: Hablar de que sólo es un cuadro de texto y eso
		\item Distintos tipos a tratar de modo particular %%TODO: List vs. Either, Maybe, Tuplas...
		\item Composición %%TODO: dar ejemplos
	\end{itemize}
	\pause
	?`Qué se puede hacer?
	\begin{itemize}
		\item Clase \texttt{Presentable}
	\end{itemize}
\end{frame}

\subsection{Trabajo a Futuro}
%%TODO: Limitaciones (con casos que no andan)
\begin{frame}
\frametitle{Otras Tareas a Realizar}
	\begin{itemize}
		\item Otras herramientas
		\begin{itemize}
			\item Soporte para TDD
			\item Refactoring
			\item Análisis de Terminación
			\item Debugging
		\end{itemize}
		\pause
		\item Otros lenguajes
		\begin{itemize}
			\item Erlang
		\end{itemize}
	\end{itemize}
\end{frame}

\subsection{Agradecimientos / Preguntas}
\begin{frame}
\frametitle{!`Gracias a todos!}
	\begin{itemize}
		\item \textsl{Sitio Web de \hpage}:
		\begin{itemize}
			\item http://hpage.haskell.com
		\end{itemize}
		\item \textsl{\hpage\ en Github}
		\begin{itemize}
			\item http://github.com/elbrujohalcon/hPage
		\end{itemize}
		\item \textsl{Fernando Benavides en la Internet}
		\begin{itemize}
			\item http://profiles.google.com/greenmellon
		\end{itemize}
	\end{itemize}
\end{frame}
\end{document}